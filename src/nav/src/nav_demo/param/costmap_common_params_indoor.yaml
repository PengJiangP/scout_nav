# 机器人几何参数（SCOUT MINI麦克纳姆轮底盘尺寸适配）
# 确认SCOUT MINI实际尺寸后微调，以下为典型值
footprint: [[-0.25, -0.2], [-0.25, 0.2], [0.25, 0.2], [0.25, -0.2]]  # 矩形 footprint，单位：米
# 若需要安全冗余，可启用膨胀层（见下方inflation参数）
robot_radius: 0.3  # 备用圆形半径（与footprint近似等效，用于简化计算）

# 障碍物探测与清除范围（匹配镭神N301激光雷达）
obstacle_range: 5.0  # 激光雷达探测障碍物的有效范围（小于此距离的障碍物会被标记）
raytrace_range: 6.0  # 清除障碍物的范围（大于此距离的障碍物会被移除）
# 说明：范围小于gmapping的maxUrange（15m），避免引入过远噪声点，同时覆盖避障所需距离

# 障碍物高度阈值（单线激光适配）
max_obstacle_height: 0.8  # 高于此高度的障碍物不被考虑（单线激光默认检测地面附近障碍）
min_obstacle_height: 0.03  # 低于此高度的障碍物不被考虑（过滤地面噪点）

# 地图类型与坐标系
map_type: costmap
global_frame_id: map  # 与AMCL、gmapping坐标系保持一致
robot_base_frame: base_link  # 与底盘坐标系匹配

# 代价地图更新参数（利用AGX Orin算力提高响应速度）
update_frequency: 20.0  # 代价地图更新频率（Hz）
publish_frequency: 10.0  # 代价地图发布频率（Hz）
transform_tolerance: 0.2  # 坐标变换容忍时间（秒）

# 传感器数据源配置（适配镭神N301激光雷达+预留ZED摄像头接口）
observation_sources: scan  # 主要使用激光雷达，可扩展加入zed_depth（若需视觉避障）

# 镭神N301激光雷达参数配置
scan:
  sensor_frame: lslidar  # 激光雷达坐标系（与之前保持一致）
  data_type: LaserScan
  topic: scan  # 激光数据话题
  marking: true  # 用于标记障碍物
  clearing: true  # 用于清除障碍物
  inf_is_valid: true  # 允许激光雷达的"无限远"点（过滤无效测距）
  laser_min_range: 0.1  # 过滤过近点（N301最小测距）
  laser_max_range: 15.0  # 与gmapping的maxUrange一致，避免无效远距点

# （可选）ZED摄像头深度数据配置（若需视觉辅助避障，取消注释）
# zed_depth:
#   sensor_frame: zed_camera_link  # ZED摄像头坐标系
#   data_type: PointCloud2
#   topic: /zed/point_cloud/cloud_registered  # ZED点云话题
#   marking: true
#   clearing: false  # 视觉数据不用于清除障碍（避免动态物体误判）
#   min_obstacle_height: 0.1
#   max_obstacle_height: 1.8  # 检测地面到人体高度的障碍

# 膨胀层参数（适配麦克纳姆轮全向运动避障）
inflation_layer:
  inflation_radius: 0.35  # 障碍物膨胀半径（略大于机器人半径，确保安全距离）
  cost_scaling_factor: 10.0  # 膨胀代价衰减系数（值越大，近障代价下降越快）

# 静态层参数（匹配地图分辨率）
static_layer:
  map_topic: /map  # 与gmapping输出地图话题一致
  subscribe_to_updates: true  # 接收地图更新

# 动态障碍层（可选，用于处理移动障碍物）
obstacle_layer:
  combination_method: 1  # 障碍叠加方式（1=取最大值）
  track_unknown_space: true  # 追踪未知区域
