local_costmap:
  # 坐标系配置（侧重实时性）
  global_frame_id: odom     # 本地规划用odom坐标系（更新更快，无map→odom延迟）
  robot_base_frame: base_link
  transform_tolerance: 0.2  # 与全局保持一致

  # 本地地图范围与分辨率（适配全向运动）
  resolution: 0.05          # 与地图分辨率一致（0.05m/像素）
  width: 4.0                # 本地地图宽度（4m，足够规划横向移动）
  height: 4.0               # 本地地图高度（4m）
  origin_x: -2.0            # 地图原点偏移（机器人位于中心）
  origin_y: -2.0

  # 更新频率（高频响应，匹配本地规划器）
  update_frequency: 20.0    # 本地代价地图更新频率（Hz），与base_local_planner的20Hz匹配
  publish_frequency: 10.0   # 发布频率（Hz）

  # 本地地图特性（随机器人移动）
  static_map: false         # 本地不依赖静态地图，专注实时传感器
  rolling_window: true      # 地图随机器人滚动（确保始终覆盖前方区域）
  track_unknown_space: false # 不追踪未知区域（本地避障依赖已知障碍）

  # 图层配置（侧重实时避障）
  plugins:
    - {name: obstacle_layer, type: "costmap_2d::ObstacleLayer"}    # 动态障碍层（激光实时数据）
    - {name: inflation_layer, type: "costmap_2d::InflationLayer"}  # 膨胀层（本地避障安全距离）
    - {name: voxel_layer, type: "costmap_2d::VoxelLayer"}          # 体素层（过滤动态噪点）

  # 本地膨胀层参数（适配麦克纳姆轮全向避障）
  inflation_layer:
    inflation_radius: 0.3   # 本地避障安全半径（略大于机器人半径0.25m，预留横向移动空间）
    cost_scaling_factor: 20.0 # 代价衰减系数（近障代价高，强制远离障碍）

  # 体素层参数（过滤激光噪点）
  voxel_layer:
    z_resolution: 0.2       # 体素高度分辨率
    z_voxels: 2             # 体素层数（覆盖地面到0.4m高度）
    max_obstacle_height: 0.4 # 仅处理低空障碍（适配单线激光）

  # 障碍层参数（实时响应激光数据）
  obstacle_layer:
    observation_sources: scan  # 仅依赖激光雷达（实时性最高）
    scan:
      data_type: LaserScan
      topic: scan
      marking: true
      clearing: true
      laser_min_range: 0.1    # 过滤过近点（避免底盘自身遮挡）
      laser_max_range: 4.0    # 本地避障仅需4m内障碍（与地图范围匹配）
